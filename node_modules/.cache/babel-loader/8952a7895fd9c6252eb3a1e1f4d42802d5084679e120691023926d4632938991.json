{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/user/Desktop/kipithonteam2/myapp/snowspot-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/user/Desktop/kipithonteam2/myapp/snowspot-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// eslint-disable-next-line import/no-cycle\nimport { EndPoints } from '../auth';\nfunction failureLoggedFetch(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return fetch(url, options).then( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(r) {\n      var _a;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!(!r.ok && r.type !== 'opaqueredirect' && r.type !== 'opaque')) {\n              _context.next = 6;\n              break;\n            }\n            _context.t0 = console;\n            _context.next = 4;\n            return (_a = r.text) === null || _a === void 0 ? void 0 : _a.call(r);\n          case 4:\n            _context.t1 = _context.sent;\n            _context.t0.error.call(_context.t0, 'Failure', _context.t1);\n          case 6:\n            return _context.abrupt(\"return\", r);\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}\nexport function fetchSessionInfoService(authVerificationUrl) {\n  return failureLoggedFetch(authVerificationUrl, {\n    credentials: 'include'\n  });\n}\nexport function fetchAuthTokenService(_x2) {\n  return _fetchAuthTokenService.apply(this, arguments);\n}\nfunction _fetchAuthTokenService() {\n  _fetchAuthTokenService = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(authEndpoint) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.abrupt(\"return\", fetch(authEndpoint));\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _fetchAuthTokenService.apply(this, arguments);\n}\nexport function fetchAuthService(_x3, _x4, _x5) {\n  return _fetchAuthService.apply(this, arguments);\n}\nfunction _fetchAuthService() {\n  _fetchAuthService = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(thoughtSpotHost, username, authToken) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          return _context3.abrupt(\"return\", failureLoggedFetch(\"\".concat(thoughtSpotHost).concat(EndPoints.TOKEN_LOGIN, \"?username=\").concat(username, \"&auth_token=\").concat(authToken), {\n            credentials: 'include',\n            // We do not want to follow the redirect, as it starts giving a CORS error\n            redirect: 'manual'\n          }));\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _fetchAuthService.apply(this, arguments);\n}\nexport function fetchAuthPostService(_x6, _x7, _x8) {\n  return _fetchAuthPostService.apply(this, arguments);\n}\nfunction _fetchAuthPostService() {\n  _fetchAuthPostService = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(thoughtSpotHost, username, authToken) {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          return _context4.abrupt(\"return\", failureLoggedFetch(\"\".concat(thoughtSpotHost).concat(EndPoints.TOKEN_LOGIN), {\n            method: 'POST',\n            headers: {\n              'content-type': 'application/x-www-form-urlencoded',\n              'x-requested-by': 'ThoughtSpot'\n            },\n            body: \"username=\".concat(encodeURIComponent(username), \"&auth_token=\").concat(encodeURIComponent(authToken)),\n            credentials: 'include',\n            // We do not want to follow the redirect, as it starts giving a CORS error\n            redirect: 'manual'\n          }));\n        case 1:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return _fetchAuthPostService.apply(this, arguments);\n}\nexport function fetchBasicAuthService(_x9, _x10, _x11) {\n  return _fetchBasicAuthService.apply(this, arguments);\n}\nfunction _fetchBasicAuthService() {\n  _fetchBasicAuthService = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(thoughtSpotHost, username, password) {\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          return _context5.abrupt(\"return\", failureLoggedFetch(\"\".concat(thoughtSpotHost).concat(EndPoints.BASIC_LOGIN), {\n            method: 'POST',\n            headers: {\n              'content-type': 'application/x-www-form-urlencoded',\n              'x-requested-by': 'ThoughtSpot'\n            },\n            body: \"username=\".concat(encodeURIComponent(username), \"&password=\").concat(encodeURIComponent(password)),\n            credentials: 'include'\n          }));\n        case 1:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return _fetchBasicAuthService.apply(this, arguments);\n}\nexport function fetchLogoutService(_x12) {\n  return _fetchLogoutService.apply(this, arguments);\n}\nfunction _fetchLogoutService() {\n  _fetchLogoutService = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(thoughtSpotHost) {\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          return _context6.abrupt(\"return\", failureLoggedFetch(\"\".concat(thoughtSpotHost).concat(EndPoints.LOGOUT), {\n            credentials: 'include',\n            method: 'POST',\n            headers: {\n              'x-requested-by': 'ThoughtSpot'\n            }\n          }));\n        case 1:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return _fetchLogoutService.apply(this, arguments);\n}","map":{"version":3,"mappings":"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","names":["EndPoints","failureLoggedFetch","url","options","fetch","then","r","ok","type","console","text","error","fetchSessionInfoService","authVerificationUrl","credentials","fetchAuthTokenService","authEndpoint","fetchAuthService","thoughtSpotHost","username","authToken","TOKEN_LOGIN","redirect","fetchAuthPostService","method","headers","body","encodeURIComponent","fetchBasicAuthService","password","BASIC_LOGIN","fetchLogoutService","LOGOUT"],"sources":["C:\\Users\\user\\Desktop\\kipithonteam2\\myapp\\snowspot-app\\node_modules\\@thoughtspot\\visual-embed-sdk\\src\\utils\\authService.ts"],"sourcesContent":["// eslint-disable-next-line import/no-cycle\nimport { EndPoints } from '../auth';\n\nfunction failureLoggedFetch(\n    url: string,\n    options: RequestInit = {},\n): Promise<Response> {\n    return fetch(url, options).then(async (r) => {\n        if (!r.ok && r.type !== 'opaqueredirect' && r.type !== 'opaque') {\n            console.error('Failure', await r.text?.());\n        }\n        return r;\n    });\n}\n\nexport function fetchSessionInfoService(\n    authVerificationUrl: string,\n): Promise<any> {\n    return failureLoggedFetch(authVerificationUrl, {\n        credentials: 'include',\n    });\n}\n\nexport async function fetchAuthTokenService(\n    authEndpoint: string,\n): Promise<any> {\n    return fetch(authEndpoint);\n}\n\nexport async function fetchAuthService(\n    thoughtSpotHost: string,\n    username: string,\n    authToken: string,\n): Promise<any> {\n    return failureLoggedFetch(\n        `${thoughtSpotHost}${EndPoints.TOKEN_LOGIN}?username=${username}&auth_token=${authToken}`,\n        {\n            credentials: 'include',\n            // We do not want to follow the redirect, as it starts giving a CORS error\n            redirect: 'manual',\n        },\n    );\n}\n\nexport async function fetchAuthPostService(\n    thoughtSpotHost: string,\n    username: string,\n    authToken: string,\n): Promise<any> {\n    return failureLoggedFetch(`${thoughtSpotHost}${EndPoints.TOKEN_LOGIN}`, {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/x-www-form-urlencoded',\n            'x-requested-by': 'ThoughtSpot',\n        },\n        body: `username=${encodeURIComponent(\n            username,\n        )}&auth_token=${encodeURIComponent(authToken)}`,\n        credentials: 'include',\n        // We do not want to follow the redirect, as it starts giving a CORS error\n        redirect: 'manual',\n    });\n}\n\nexport async function fetchBasicAuthService(\n    thoughtSpotHost: string,\n    username: string,\n    password: string,\n): Promise<any> {\n    return failureLoggedFetch(`${thoughtSpotHost}${EndPoints.BASIC_LOGIN}`, {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/x-www-form-urlencoded',\n            'x-requested-by': 'ThoughtSpot',\n        },\n        body: `username=${encodeURIComponent(\n            username,\n        )}&password=${encodeURIComponent(password)}`,\n        credentials: 'include',\n    });\n}\n\nexport async function fetchLogoutService(\n    thoughtSpotHost: string,\n): Promise<any> {\n    return failureLoggedFetch(`${thoughtSpotHost}${EndPoints.LOGOUT}`, {\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n            'x-requested-by': 'ThoughtSpot',\n        },\n    });\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React from 'react';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\nimport { SearchBarEmbed as _SearchBarEmbed } from '../embed/search-bar';\nimport { SearchEmbed as _SearchEmbed } from '../embed/search';\nimport { AppEmbed as _AppEmbed } from '../embed/app';\nimport { LiveboardEmbed as _LiveboardEmbed } from '../embed/liveboard';\nimport { getViewPropsAndListeners } from './util';\nconst componentFactory = EmbedConstructor => React.forwardRef((props, forwardedRef) => {\n  const ref = React.useRef(null);\n  const {\n    className,\n    ...embedProps\n  } = props;\n  const {\n    viewConfig,\n    listeners\n  } = getViewPropsAndListeners(embedProps);\n  useDeepCompareEffect(() => {\n    const tsEmbed = new EmbedConstructor(ref.current, {\n      ...viewConfig\n    });\n    Object.keys(listeners).forEach(eventName => {\n      tsEmbed.on(eventName, listeners[eventName]);\n    });\n    tsEmbed.render();\n    if (forwardedRef) {\n      // eslint-disable-next-line no-param-reassign\n      forwardedRef.current = tsEmbed;\n    }\n  }, [viewConfig, listeners]);\n  return React.createElement(\"div\", {\n    \"data-testid\": \"tsEmbed\",\n    ref: ref,\n    className: className\n  });\n});\nexport const SearchEmbed = componentFactory(_SearchEmbed);\nexport const AppEmbed = componentFactory(_AppEmbed);\nexport const LiveboardEmbed = componentFactory(_LiveboardEmbed);\nexport const PinboardEmbed = componentFactory(_LiveboardEmbed);\nexport const SearchBarEmbed = componentFactory(_SearchBarEmbed);\nexport const useEmbedRef = () => {\n  return React.useRef(null);\n};","map":{"version":3,"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,oBAAoB,MAAM,yBAAyB;AAC1D,SACIC,cAAc,IAAIC,eAAe,QAE9B,qBAAqB;AAC5B,SAASC,WAAW,IAAIC,YAAY,QAA0B,iBAAiB;AAC/E,SAASC,QAAQ,IAAIC,SAAS,QAAuB,cAAc;AACnE,SACIC,cAAc,IAAIC,eAAe,QAE9B,oBAAoB;AAI3B,SAAqBC,wBAAwB,QAAQ,QAAQ;AAE7D,MAAMC,gBAAgB,GAKlBC,gBAAmB,IAEnBZ,KAAK,CAACa,UAAU,CACZ,CAACC,KAAQ,EAAEC,YAA6C,KAAI;EACxD,MAAMC,GAAG,GAAGhB,KAAK,CAACiB,MAAM,CAAiB,IAAI,CAAC;EAC9C,MAAM;IAAEC,SAAS;IAAE,GAAGC;EAAU,CAAE,GAAGL,KAAK;EAC1C,MAAM;IAAEM,UAAU;IAAEC;EAAS,CAAE,GAAGX,wBAAwB,CAGxDS,UAAU,CAAC;EACblB,oBAAoB,CAAC,MAAK;IACtB,MAAMqB,OAAO,GAAG,IAAIV,gBAAgB,CAACI,GAAI,CAACO,OAAO,EAAE;MAC/C,GAAGH;KACN,CAAC;IACFI,MAAM,CAACC,IAAI,CAACJ,SAAS,CAAC,CAACK,OAAO,CAAEC,SAAS,IAAI;MACzCL,OAAO,CAACM,EAAE,CACND,SAAuB,EACvBN,SAAS,CAACM,SAAuB,CAAC,CACrC;IACL,CAAC,CAAC;IACFL,OAAO,CAACO,MAAM,EAAE;IAChB,IAAId,YAAY,EAAE;MACd;MACAA,YAAY,CAACQ,OAAO,GAAGD,OAAO;;EAEtC,CAAC,EAAE,CAACF,UAAU,EAAEC,SAAS,CAAC,CAAC;EAE3B,OACIrB;IAAA,eACgB,SAAS;IACrBgB,GAAG,EAAEA,GAAG;IACRE,SAAS,EAAEA;EAAS,EACjB;AAEf,CAAC,CACJ;AAIL,OAAO,MAAMd,WAAW,GAAGO,gBAAgB,CAIzCN,YAAY,CAAC;AAIf,OAAO,MAAMC,QAAQ,GAAGK,gBAAgB,CAItCJ,SAAS,CAAC;AAIZ,OAAO,MAAMC,cAAc,GAAGG,gBAAgB,CAI5CF,eAAe,CAAC;AAElB,OAAO,MAAMqB,aAAa,GAAGnB,gBAAgB,CAI3CF,eAAe,CAAC;AAIlB,OAAO,MAAMP,cAAc,GAAGS,gBAAgB,CAI5CR,eAAe,CAAC;AAElB,OAAO,MAAM4B,WAAW,GAAG,MAAsC;EAC7D,OAAO/B,KAAK,CAACiB,MAAM,CAAU,IAAI,CAAC;AACtC,CAAC","names":["React","useDeepCompareEffect","SearchBarEmbed","_SearchBarEmbed","SearchEmbed","_SearchEmbed","AppEmbed","_AppEmbed","LiveboardEmbed","_LiveboardEmbed","getViewPropsAndListeners","componentFactory","EmbedConstructor","forwardRef","props","forwardedRef","ref","useRef","className","embedProps","viewConfig","listeners","tsEmbed","current","Object","keys","forEach","eventName","on","render","PinboardEmbed","useEmbedRef"],"sources":["C:\\Users\\user\\Desktop\\kipithonteam2\\myapp\\snowspot-app\\node_modules\\@thoughtspot\\visual-embed-sdk\\src\\react\\index.tsx"],"sourcesContent":["import React from 'react';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\nimport {\n    SearchBarEmbed as _SearchBarEmbed,\n    SearchBarViewConfig,\n} from '../embed/search-bar';\nimport { SearchEmbed as _SearchEmbed, SearchViewConfig } from '../embed/search';\nimport { AppEmbed as _AppEmbed, AppViewConfig } from '../embed/app';\nimport {\n    LiveboardEmbed as _LiveboardEmbed,\n    LiveboardViewConfig,\n} from '../embed/liveboard';\nimport { TsEmbed } from '../embed/ts-embed';\n\nimport { EmbedEvent, ViewConfig } from '../types';\nimport { EmbedProps, getViewPropsAndListeners } from './util';\n\nconst componentFactory = <\n    T extends typeof TsEmbed,\n    U extends EmbedProps,\n    V extends ViewConfig\n>(\n    EmbedConstructor: T,\n) =>\n    React.forwardRef<TsEmbed, U>(\n        (props: U, forwardedRef: React.MutableRefObject<TsEmbed>) => {\n            const ref = React.useRef<HTMLDivElement>(null);\n            const { className, ...embedProps } = props;\n            const { viewConfig, listeners } = getViewPropsAndListeners<\n                Omit<U, 'className'>,\n                V\n            >(embedProps);\n            useDeepCompareEffect(() => {\n                const tsEmbed = new EmbedConstructor(ref!.current, {\n                    ...viewConfig,\n                });\n                Object.keys(listeners).forEach((eventName) => {\n                    tsEmbed.on(\n                        eventName as EmbedEvent,\n                        listeners[eventName as EmbedEvent],\n                    );\n                });\n                tsEmbed.render();\n                if (forwardedRef) {\n                    // eslint-disable-next-line no-param-reassign\n                    forwardedRef.current = tsEmbed;\n                }\n            }, [viewConfig, listeners]);\n\n            return (\n                <div\n                    data-testid=\"tsEmbed\"\n                    ref={ref}\n                    className={className}\n                ></div>\n            );\n        },\n    );\n\ninterface SearchProps extends EmbedProps, SearchViewConfig {}\n\nexport const SearchEmbed = componentFactory<\n    typeof _SearchEmbed,\n    SearchProps,\n    SearchViewConfig\n>(_SearchEmbed);\n\ninterface AppProps extends EmbedProps, AppViewConfig {}\n\nexport const AppEmbed = componentFactory<\n    typeof _AppEmbed,\n    AppProps,\n    AppViewConfig\n>(_AppEmbed);\n\ninterface LiveboardProps extends EmbedProps, LiveboardViewConfig {}\n\nexport const LiveboardEmbed = componentFactory<\n    typeof _LiveboardEmbed,\n    LiveboardProps,\n    LiveboardViewConfig\n>(_LiveboardEmbed);\n\nexport const PinboardEmbed = componentFactory<\n    typeof _LiveboardEmbed,\n    LiveboardProps,\n    LiveboardViewConfig\n>(_LiveboardEmbed);\n\ninterface SearchBarEmbedProps extends EmbedProps, SearchBarViewConfig {}\n\nexport const SearchBarEmbed = componentFactory<\n    typeof _SearchBarEmbed,\n    SearchBarEmbedProps,\n    SearchBarViewConfig\n>(_SearchBarEmbed);\n\nexport const useEmbedRef = (): React.MutableRefObject<TsEmbed> => {\n    return React.useRef<TsEmbed>(null);\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}